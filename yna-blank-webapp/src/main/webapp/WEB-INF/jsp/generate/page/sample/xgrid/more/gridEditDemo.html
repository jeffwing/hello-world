<style type="text/css" scoped>
</style>
<template>
	<div v-cloak class="page" v-loading="pageLoading" :vue-loading-text="messageutil.get('page.loading.text')">
		<escort-form ref="form" id="form" :model="form">
			<escort-area style="margin: 20px;" id="area_Oc8SP" ref="area_Oc8SP">
				<escort-notice :plain="true" title="Grid_1" id="vueNotice_OaKcY" ref="vueNotice_OaKcY">
				</escort-notice>
				<escort-xgrid height="220" id="vueXgrid_OaYpS" ref="vueXgrid_OaYpS" :data="vueDataSet_grid_1.data" :datasource="vueDataSet_grid_1">
					<escort-xgrid-column prop="id" width="200px" text="Id" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column prop="name" width="200px" text="Name" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column prop="type" width="200px" text="Type" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column prop="description" width="200px" text="Description" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column width="200px" text="操作" render-name="button" :buttons="vueXgrid_OaYpSVueXgridButtonColumn_OcqmgButtons">
					</escort-xgrid-column>
				</escort-xgrid>
				<escort-notice :plain="true" title="Grid_2" id="vueNotice_85KBdw" ref="vueNotice_85KBdw">
				</escort-notice>
				<escort-xgrid height="220" id="vueXgrid_OaYGA" ref="vueXgrid_OaYGA" :data="vueDataSet_grid_2.data" :datasource="vueDataSet_grid_2">
					<escort-xgrid-column prop="id" width="200px" text="Id" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column prop="name" width="200px" text="Name" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column prop="age" width="200px" text="Age" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column prop="description" width="200px" text="Description" render-name="input">
					</escort-xgrid-column>
					<escort-xgrid-column width="200px" text="操作" render-name="button" :buttons="vueXgrid_OaYGAVueXgridButtonColumn_OcqmgButtons">
					</escort-xgrid-column>
				</escort-xgrid>
			</escort-area>
			<escort-aside id="vueAside_OcGND" ref="vueAside_OcGND" @after-close="vueAside_OcGNDAfterClose" src="/gridEditAsideDemo">
			</escort-aside>
		</escort-form>
	</div>
</template>
<script type="text/javascript">
	var pageMixins;
	(function() {
		var pageMixinMap = {};
		pageMixinMap.event = {
			methods: {
				vueAside_OcGNDAfterClose: function(params) {
					if (params) {
						this.asideCallBack(params);
					}
				}
			}
		};
		pageMixinMap.manualSeperate = {
			data: function() {
				return {
					//保存选中的行数据，用与后续更新数据
					selectRow: {}
				};
			},
			methods: {
				updateRow: function(row) {
					this.selectRow = row;
					this.$refs.vueAside_OcGND.open(row);
				},
				asideCallBack: function(row) {
					VueUtil.merge(this.selectRow, row);
				}
			}
		};
		pageMixinMap.auto = {
			data: function() {
				return {
					pageLoading: false,
					form: {},
					vueDataSet_grid_1: this.getDataSource({
						type: "POST",
						localData: [{
							id: "1",
							name: "NameA",
							type: "1",
							description: "DescriptionA"
						}, {
							id: "2",
							name: "NameB",
							type: "1",
							description: "DescriptionB"
						}, {
							id: "3",
							name: "NameC",
							type: "2",
							description: "DescriptionC"
						}, {
							id: "4",
							name: "NameD",
							type: "2",
							description: "DescriptionD"
						}, {
							id: "5",
							name: "NameE",
							type: "2",
							description: "DescriptionE"
						}]
					}),
					vueDataSet_grid_2: this.getDataSource({
						type: "POST",
						localData: [{
							id: "g_1",
							name: "Name_A",
							age: "12",
							description: "DescriptionA"
						}, {
							id: "g_2",
							name: "Name_B",
							age: "33",
							description: "DescriptionB"
						}, {
							id: "g_3",
							name: "Name_C",
							age: "20",
							description: "DescriptionC"
						}, {
							id: "g_4",
							name: "Name_D",
							age: "61",
							description: "DescriptionD"
						}, {
							id: "g_5",
							name: "Name_E",
							age: "23",
							description: "DescriptionE"
						}]
					})
				};
			},
			mounted: function() {
				this.vueDataSet_grid_1.retrieve();
				this.vueDataSet_grid_2.retrieve();
			},
			methods: {
				vueXgrid_OaYpSVueXgridButtonColumn_OcqmgButtons: function(scope) {
					return [{
						value: "update",
						icon: 'vue-icon-edit2',
						click: this.updateRow
					}];
				},
				vueXgrid_OaYGAVueXgridButtonColumn_OcqmgButtons: function(scope) {
					return [{
						value: "update",
						icon: 'vue-icon-edit2',
						click: this.updateRow
					}];
				}
			}
		};
		pageMixins = getPageMixins(pageMixinMap);
	})();
	module.exports = {
		mixins: pageMixins,
		name: "gridEditDemo"
	};
</script>